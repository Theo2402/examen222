{"ast":null,"code":"import React from'react';import{Bar}from'react-chartjs-2';import'chart.js/auto';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PurchaseChart=_ref=>{let{purchases,offers}=_ref;const processData=()=>{const offerTitles=offers.reduce((acc,offer)=>{acc[offer.id]=offer.title;return acc;},{});const dataByDateAndOffer=purchases.reduce((acc,purchase)=>{const date=new Date(purchase.purchase_date).toLocaleDateString();const offerTitle=offerTitles[purchase.offer.id];if(!acc[date])acc[date]={};if(!acc[date][offerTitle])acc[date][offerTitle]=0;acc[date][offerTitle]+=1;return acc;},{});const labels=Object.keys(dataByDateAndOffer).sort((a,b)=>new Date(a)-new Date(b));const datasets=offers.map((offer,index)=>{const data=labels.map(label=>dataByDateAndOffer[label][offer.title]||0);return{label:offer.title,data,backgroundColor:getFixedColor(index),borderColor:getFixedColor(index),borderWidth:1,barThickness:20// grosseur des barres\n};});return{labels,datasets};};const getFixedColor=index=>{const colors=['#383838',// gris\n'#888888',// gris clair \n'#c8c8c8'// gros tres clair \n];return colors[index%colors.length];};const data=processData();const options={responsive:true,maintainAspectRatio:false,scales:{x:{stacked:true},y:{stacked:true}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-chart-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title-ticket\",children:\"Nombre de tickets achet\\xE9s par jour\"}),/*#__PURE__*/_jsx(Bar,{data:data,options:options})]});};export default PurchaseChart;","map":{"version":3,"names":["React","Bar","jsx","_jsx","jsxs","_jsxs","PurchaseChart","_ref","purchases","offers","processData","offerTitles","reduce","acc","offer","id","title","dataByDateAndOffer","purchase","date","Date","purchase_date","toLocaleDateString","offerTitle","labels","Object","keys","sort","a","b","datasets","map","index","data","label","backgroundColor","getFixedColor","borderColor","borderWidth","barThickness","colors","length","options","responsive","maintainAspectRatio","scales","x","stacked","y","className","children"],"sources":["/Users/theodiloreto/Desktop/examen 5 3/jo/src/components/AdminChart.js"],"sourcesContent":["import React from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport 'chart.js/auto';\n\nconst PurchaseChart = ({ purchases, offers }) => {\n  const processData = () => {\n    const offerTitles = offers.reduce((acc, offer) => {\n      acc[offer.id] = offer.title;\n      return acc;\n    }, {});\n\n    const dataByDateAndOffer = purchases.reduce((acc, purchase) => {\n      const date = new Date(purchase.purchase_date).toLocaleDateString();\n      const offerTitle = offerTitles[purchase.offer.id];\n      if (!acc[date]) acc[date] = {};\n      if (!acc[date][offerTitle]) acc[date][offerTitle] = 0;\n      acc[date][offerTitle] += 1;\n      return acc;\n    }, {});\n\n    const labels = Object.keys(dataByDateAndOffer).sort((a, b) => new Date(a) - new Date(b));\n    const datasets = offers.map((offer, index) => {\n      const data = labels.map(label => dataByDateAndOffer[label][offer.title] || 0);\n      return {\n        label: offer.title,\n        data,\n        backgroundColor: getFixedColor(index),\n        borderColor: getFixedColor(index),\n        borderWidth: 1,\n        barThickness: 20, // grosseur des barres\n      };\n    });\n\n    return { labels, datasets };\n  };\n\n  const getFixedColor = (index) => {\n    const colors = [\n      '#383838', // gris\n      '#888888', // gris clair \n      '#c8c8c8', // gros tres clair \n    ];\n    return colors[index % colors.length];\n  };\n\n  const data = processData();\n\n  const options = {\n    responsive: true,\n    maintainAspectRatio: false,\n    scales: {\n      x: {\n        stacked: true,\n      },\n      y: {\n        stacked: true,\n      },\n    },\n  };\n\n  return (\n    <div className=\"admin-chart-container\">\n      <h2 className='title-ticket'>Nombre de tickets achet√©s par jour</h2>\n      <Bar data={data} options={options} />\n    </div>\n  );\n};\n\nexport default PurchaseChart;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}