{"ast":null,"code":"var _jsxFileName = \"/Users/theodiloreto/Desktop/examen 2/jo/src/components/Profile.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport QRCode from 'qrcode.react';\nimport { HeaderBase, FooterBase } from \"./HeaderFooter\";\nimport '../css/Profile.css';\nimport { useAuth } from '../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst getTotalQuantity = () => {\n  const cart = JSON.parse(localStorage.getItem('cart')) || [];\n  return cart.reduce((acc, item) => acc + item.quantity, 0);\n};\nconst Profile = () => {\n  _s();\n  const {\n    user,\n    setUser,\n    logout\n  } = useAuth();\n  const [purchases, setPurchases] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const navigate = useNavigate();\n  const [totalQuantity, setTotalQuantity] = useState(getTotalQuantity());\n  const fetchPurchases = useCallback(async currentToken => {\n    setIsLoading(true);\n    try {\n      const response = await axios.get('http://127.0.0.1:8000/api/purchase/purchase/', {\n        headers: {\n          'Authorization': `Bearer ${currentToken}`\n        }\n      });\n      console.log('API Response:', response.data);\n      setPurchases(response.data);\n      setIsLoading(false);\n    } catch (fetchError) {\n      console.error('Failed to fetch purchases:', fetchError);\n      setError(fetchError.message);\n      setIsLoading(false);\n      if (fetchError.response && fetchError.response.status === 401) {\n        logout();\n        navigate('/login');\n      }\n    }\n  }, [logout, navigate]);\n  const parseJwtAndSetRole = useCallback(token => {\n    try {\n      const base64Url = token.split('.')[1];\n      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n      const jsonPayload = decodeURIComponent(atob(base64).split('').map(c => {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n      }).join(''));\n      const decodedToken = JSON.parse(jsonPayload);\n      setIsAdmin(decodedToken.is_admin);\n      setUser({\n        ...decodedToken\n      });\n    } catch (e) {\n      console.error('Failed to parse JWT:', e);\n    }\n  }, [setUser]);\n  const refreshToken = useCallback(async () => {\n    try {\n      const refreshToken = localStorage.getItem('refresh_token');\n      if (!refreshToken) {\n        console.error('Refresh token is not available.');\n        navigate('/login');\n        return;\n      }\n      const response = await axios.post('http://127.0.0.1:8000/api/token/refresh/', {\n        refresh: refreshToken\n      });\n      const newAccessToken = response.data.access;\n      const newExpiresAt = new Date().getTime() + response.data.expires_in * 1000;\n      localStorage.setItem('access_token', newAccessToken);\n      localStorage.setItem('token_expires_at', newExpiresAt);\n      parseJwtAndSetRole(newAccessToken);\n      fetchPurchases(newAccessToken);\n    } catch (refreshError) {\n      console.error('Failed to refresh token:', refreshError);\n      logout();\n      navigate('/login');\n    }\n  }, [navigate, parseJwtAndSetRole, fetchPurchases, logout]);\n  useEffect(() => {\n    const checkTokenAndFetchData = async () => {\n      const localToken = localStorage.getItem('access_token');\n      const tokenExpiresAt = localStorage.getItem('token_expires_at');\n      if (!localToken || new Date().getTime() > tokenExpiresAt) {\n        await refreshToken();\n      } else {\n        parseJwtAndSetRole(localToken);\n        fetchPurchases(localToken);\n      }\n    };\n    if (user) {\n      checkTokenAndFetchData();\n    }\n    updateTotalQuantity();\n    const interval = setInterval(() => {\n      const localToken = localStorage.getItem('access_token');\n      const tokenExpiresAt = localStorage.getItem('token_expires_at');\n      if (!localToken || new Date().getTime() > tokenExpiresAt) {\n        logout();\n        navigate('/login');\n      }\n    }, 60000);\n    return () => clearInterval(interval);\n  }, [user, logout, navigate, refreshToken, parseJwtAndSetRole, fetchPurchases]);\n  const updateTotalQuantity = () => {\n    const total = getTotalQuantity();\n    setTotalQuantity(total);\n    console.log(`Total Quantity: ${total}`);\n  };\n  if (!user) {\n    navigate('/login');\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-page\",\n    children: [/*#__PURE__*/_jsxDEV(HeaderBase, {\n      totalQuantity: totalQuantity,\n      currentPage: \"profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"outer-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"logout-container\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: logout,\n            className: \"logout-button\",\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 13\n        }, this), !isAdmin && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"my-tickets-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Mes Tickets\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 17\n          }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Loading tickets...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 19\n          }, this) : purchases.length > 0 ? purchases.map(purchase => {\n            var _purchase$offer, _purchase$offer2, _purchase$offer3;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"ticket-card\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ticket-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  children: ((_purchase$offer = purchase.offer) === null || _purchase$offer === void 0 ? void 0 : _purchase$offer.title) || \"No Title Available\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Description: \", ((_purchase$offer2 = purchase.offer) === null || _purchase$offer2 === void 0 ? void 0 : _purchase$offer2.description) || \"No Description Available\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Date: \", new Date(purchase.purchase_date).toLocaleDateString()]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Price: \", (_purchase$offer3 = purchase.offer) !== null && _purchase$offer3 !== void 0 && _purchase$offer3.price ? parseFloat(purchase.offer.price).toFixed(2) : \"N/A\", \"\\u20AC\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ticket-qr\",\n                children: /*#__PURE__*/_jsxDEV(QRCode, {\n                  value: purchase.combined_key,\n                  size: 128\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 23\n              }, this)]\n            }, purchase.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 21\n            }, this);\n          }) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Vous n'avez pas de tickets.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 19\n          }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"error-message\",\n            children: error\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(FooterBase, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 7\n  }, this);\n};\n_s(Profile, \"vDBuvdO54mnY48cilR7eOX5Ogew=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c = Profile;\nexport default Profile;\nvar _c;\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","axios","QRCode","HeaderBase","FooterBase","useAuth","jsxDEV","_jsxDEV","getTotalQuantity","cart","JSON","parse","localStorage","getItem","reduce","acc","item","quantity","Profile","_s","user","setUser","logout","purchases","setPurchases","isLoading","setIsLoading","error","setError","isAdmin","setIsAdmin","navigate","totalQuantity","setTotalQuantity","fetchPurchases","currentToken","response","get","headers","console","log","data","fetchError","message","status","parseJwtAndSetRole","token","base64Url","split","base64","replace","jsonPayload","decodeURIComponent","atob","map","c","charCodeAt","toString","slice","join","decodedToken","is_admin","e","refreshToken","post","refresh","newAccessToken","access","newExpiresAt","Date","getTime","expires_in","setItem","refreshError","checkTokenAndFetchData","localToken","tokenExpiresAt","updateTotalQuantity","interval","setInterval","clearInterval","total","className","children","currentPage","fileName","_jsxFileName","lineNumber","columnNumber","onClick","length","purchase","_purchase$offer","_purchase$offer2","_purchase$offer3","offer","title","description","purchase_date","toLocaleDateString","price","parseFloat","toFixed","value","combined_key","size","id","_c","$RefreshReg$"],"sources":["/Users/theodiloreto/Desktop/examen 2/jo/src/components/Profile.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport QRCode from 'qrcode.react';\nimport { HeaderBase, FooterBase } from \"./HeaderFooter\";\nimport '../css/Profile.css';\nimport { useAuth } from '../contexts/AuthContext';\n\nconst getTotalQuantity = () => {\n  const cart = JSON.parse(localStorage.getItem('cart')) || [];\n  return cart.reduce((acc, item) => acc + item.quantity, 0);\n};\n\nconst Profile = () => {\n  const { user, setUser, logout } = useAuth();\n  const [purchases, setPurchases] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const navigate = useNavigate();\n  const [totalQuantity, setTotalQuantity] = useState(getTotalQuantity());\n\n  const fetchPurchases = useCallback(async (currentToken) => {\n    setIsLoading(true);\n    try {\n      const response = await axios.get('http://127.0.0.1:8000/api/purchase/purchase/', {\n        headers: { 'Authorization': `Bearer ${currentToken}` }\n      });\n      console.log('API Response:', response.data);\n      setPurchases(response.data);\n      setIsLoading(false);\n    } catch (fetchError) {\n      console.error('Failed to fetch purchases:', fetchError);\n      setError(fetchError.message);\n      setIsLoading(false);\n      if (fetchError.response && fetchError.response.status === 401) {\n        logout();\n        navigate('/login');\n      }\n    }\n  }, [logout, navigate]);\n\n  const parseJwtAndSetRole = useCallback((token) => {\n    try {\n      const base64Url = token.split('.')[1];\n      const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n      const jsonPayload = decodeURIComponent(atob(base64).split('').map(c => {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n      }).join(''));\n      const decodedToken = JSON.parse(jsonPayload);\n      setIsAdmin(decodedToken.is_admin);\n      setUser({ ...decodedToken });\n    } catch (e) {\n      console.error('Failed to parse JWT:', e);\n    }\n  }, [setUser]);\n\n  const refreshToken = useCallback(async () => {\n    try {\n      const refreshToken = localStorage.getItem('refresh_token');\n      if (!refreshToken) {\n        console.error('Refresh token is not available.');\n        navigate('/login');\n        return;\n      }\n      const response = await axios.post('http://127.0.0.1:8000/api/token/refresh/', { refresh: refreshToken });\n      const newAccessToken = response.data.access;\n      const newExpiresAt = new Date().getTime() + (response.data.expires_in * 1000);\n      localStorage.setItem('access_token', newAccessToken);\n      localStorage.setItem('token_expires_at', newExpiresAt);\n      parseJwtAndSetRole(newAccessToken);\n      fetchPurchases(newAccessToken);\n    } catch (refreshError) {\n      console.error('Failed to refresh token:', refreshError);\n      logout();\n      navigate('/login');\n    }\n  }, [navigate, parseJwtAndSetRole, fetchPurchases, logout]);\n\n  useEffect(() => {\n    const checkTokenAndFetchData = async () => {\n      const localToken = localStorage.getItem('access_token');\n      const tokenExpiresAt = localStorage.getItem('token_expires_at');\n      if (!localToken || new Date().getTime() > tokenExpiresAt) {\n        await refreshToken();\n      } else {\n        parseJwtAndSetRole(localToken);\n        fetchPurchases(localToken);\n      }\n    };\n\n    if (user) {\n      checkTokenAndFetchData();\n    }\n\n    updateTotalQuantity();\n\n    const interval = setInterval(() => {\n      const localToken = localStorage.getItem('access_token');\n      const tokenExpiresAt = localStorage.getItem('token_expires_at');\n      if (!localToken || new Date().getTime() > tokenExpiresAt) {\n        logout();\n        navigate('/login');\n      }\n    }, 60000);\n\n    return () => clearInterval(interval);\n  }, [user, logout, navigate, refreshToken, parseJwtAndSetRole, fetchPurchases]);\n\n  const updateTotalQuantity = () => {\n    const total = getTotalQuantity();\n    setTotalQuantity(total);\n    console.log(`Total Quantity: ${total}`);\n  };\n\n  if (!user) {\n    navigate('/login');\n    return null;\n  }\n\n  return (\n      <div className=\"profile-page\">\n        <HeaderBase totalQuantity={totalQuantity} currentPage=\"profile\" />\n        <div className=\"profile-container\">\n          <div className=\"outer-card\">\n            <div className=\"logout-container\">\n              <button onClick={logout} className=\"logout-button\">Logout</button>\n            </div>\n            {!isAdmin && (\n              <div className=\"my-tickets-section\">\n                <h2>Mes Tickets</h2>\n                {isLoading ? (\n                  <p>Loading tickets...</p>\n                ) : purchases.length > 0 ? (\n                  purchases.map(purchase => (\n                    <div className=\"ticket-card\" key={purchase.id}>\n                      <div className=\"ticket-info\">\n                        <h3>{purchase.offer?.title || \"No Title Available\"}</h3>\n                        <p>Description: {purchase.offer?.description || \"No Description Available\"}</p>\n                        <p>Date: {new Date(purchase.purchase_date).toLocaleDateString()}</p>\n                        <p>Price: {purchase.offer?.price ? parseFloat(purchase.offer.price).toFixed(2) : \"N/A\"}â‚¬</p>\n                      </div>\n                      <div className=\"ticket-qr\">\n                        <QRCode value={purchase.combined_key} size={128} />\n                      </div>\n                    </div>\n                  ))\n                ) : (\n                  <p>Vous n'avez pas de tickets.</p>\n                )}\n                {error && <p className=\"error-message\">{error}</p>}\n              </div>\n            )}\n          </div>\n        </div>\n        <FooterBase />\n      </div>\n  );\n};\n\nexport default Profile;\n\n\n\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}